<mxfile host="app.diagrams.net" modified="2026-02-08T09:40:00.000Z" agent="GPT" version="24.7.8" type="device">
  <diagram id="project-bedrock-arch" name="Project Bedrock Architecture">
    <mxGraphModel dx="1420" dy="820" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="Project Bedrock – AWS EKS Retail Platform (us-east-1) – tag: Project: barakat-2025-capstone" style="text;html=1;align=center;verticalAlign=middle;fontSize=22;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="20" width="1440" height="40" as="geometry"/>
        </mxCell>

        <!-- Left column: Users + CI/CD -->
        <mxCell id="leftCol" value="Users + CI/CD" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#d0d0d0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="90" width="300" height="940" as="geometry"/>
        </mxCell>

        <mxCell id="userBrowser" value="User Browser&#xa;(Public Access)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="leftCol">
          <mxGeometry x="30" y="70" width="240" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="github" value="GitHub Repo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="leftCol">
          <mxGeometry x="30" y="180" width="240" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="gha" value="GitHub Actions&#xa;PR: terraform plan&#xa;main: terraform apply" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="leftCol">
          <mxGeometry x="30" y="260" width="240" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="secrets" value="Repo Secrets&#xa;AWS creds stored here&#xa;(no hardcoding)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#c27c0e;" vertex="1" parent="leftCol">
          <mxGeometry x="30" y="370" width="240" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="tfBackend" value="Terraform Remote State" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f4ff;strokeColor=#2c6aa0;fontStyle=1;" vertex="1" parent="leftCol">
          <mxGeometry x="30" y="500" width="240" height="220" as="geometry"/>
        </mxCell>

        <mxCell id="tfstateS3" value="S3: bedrock-tfstate-541801281384-025-1181&#xa;key: project-bedrock/prod/terraform.tfstate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="tfBackend">
          <mxGeometry x="15" y="50" width="210" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="ddbLocks" value="DynamoDB: bedrock-terraform-locks&#xa;(state locking)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="tfBackend">
          <mxGeometry x="15" y="145" width="210" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="devAccess" value="Secure Dev Access" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eef9f0;strokeColor=#2f7d32;fontStyle=1;" vertex="1" parent="leftCol">
          <mxGeometry x="30" y="760" width="240" height="230" as="geometry"/>
        </mxCell>

        <mxCell id="iamUser" value="IAM User: bedrock-dev-view&#xa;Policy: ReadOnlyAccess" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2f7d32;" vertex="1" parent="devAccess">
          <mxGeometry x="15" y="50" width="210" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="rbac" value="K8s RBAC&#xa;aws-auth mapUsers → bedrock-readonly&#xa;ClusterRoleBinding → ClusterRole: view" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2f7d32;" vertex="1" parent="devAccess">
          <mxGeometry x="15" y="135" width="210" height="80" as="geometry"/>
        </mxCell>

        <!-- Middle column: AWS Cloud -->
        <mxCell id="awsCloud" value="AWS Cloud (us-east-1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#2c6aa0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="90" width="1060" height="940" as="geometry"/>
        </mxCell>

        <mxCell id="vpc" value="VPC: project-bedrock-vpc&#xa;(2 AZs, public + private subnets)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;fontStyle=1;" vertex="1" parent="awsCloud">
          <mxGeometry x="30" y="60" width="1000" height="520" as="geometry"/>
        </mxCell>

        <!-- Public subnets -->
        <mxCell id="public" value="Public Subnets (2 AZs)&#xa;us-east-1a / us-east-1b" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3f3;strokeColor=#b85450;fontStyle=1;" vertex="1" parent="vpc">
          <mxGeometry x="20" y="70" width="470" height="420" as="geometry"/>
        </mxCell>

        <mxCell id="alb" value="ALB (Ingress)&#xa;AWS Load Balancer Controller" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#b85450;" vertex="1" parent="public">
          <mxGeometry x="30" y="70" width="410" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="nat" value="NAT Gateway + EIP&#xa;(outbound internet for private subnets)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#b85450;" vertex="1" parent="public">
          <mxGeometry x="30" y="190" width="410" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="igw" value="Internet Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#b85450;" vertex="1" parent="public">
          <mxGeometry x="30" y="290" width="410" height="60" as="geometry"/>
        </mxCell>

        <!-- Private subnets -->
        <mxCell id="private" value="Private Subnets (2 AZs)&#xa;us-east-1a / us-east-1b" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3fff3;strokeColor=#2f7d32;fontStyle=1;" vertex="1" parent="vpc">
          <mxGeometry x="510" y="70" width="470" height="420" as="geometry"/>
        </mxCell>

        <mxCell id="eks" value="EKS Cluster: project-bedrock-cluster&#xa;Node Group: project-bedrock-ng" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2f7d32;fontStyle=1;" vertex="1" parent="private">
          <mxGeometry x="30" y="60" width="410" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="retailns" value="Namespace: retail-app&#xa;Retail Store Sample App (Helm)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2f7d32;" vertex="1" parent="private">
          <mxGeometry x="30" y="165" width="410" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="services" value="Services: ui, catalog, carts, orders, checkout" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2f7d32;" vertex="1" parent="private">
          <mxGeometry x="30" y="260" width="410" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="inclDeps" value="In-cluster dependencies (core req):&#xa;catalog-mysql, orders-postgresql, carts-dynamodb(local),&#xa;orders-rabbitmq, checkout-redis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2f7d32;" vertex="1" parent="private">
          <mxGeometry x="30" y="335" width="410" height="70" as="geometry"/>
        </mxCell>

        <!-- Data layer bonus -->
        <mxCell id="bonusData" value="Bonus: Managed Persistence (RDS)&#xa;Integration optional / pending if not wired in Helm" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f4ff;strokeColor=#2c6aa0;fontStyle=1;" vertex="1" parent="awsCloud">
          <mxGeometry x="30" y="600" width="1000" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="rdsMy" value="RDS MySQL&#xa;Catalog DB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="bonusData">
          <mxGeometry x="30" y="60" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="rdsPg" value="RDS PostgreSQL&#xa;Orders DB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="bonusData">
          <mxGeometry x="360" y="60" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="sgNote" value="Security Groups&#xa;Allow EKS → RDS (least privilege)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="bonusData">
          <mxGeometry x="690" y="60" width="280" height="70" as="geometry"/>
        </mxCell>

        <!-- Right column: Observability + Serverless -->
        <mxCell id="rightCol" value="Observability + Serverless" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#d0d0d0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1420" y="90" width="480" height="940" as="geometry"/>
        </mxCell>

        <mxCell id="obs" value="CloudWatch Logging" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eef6ff;strokeColor=#2c6aa0;fontStyle=1;" vertex="1" parent="rightCol">
          <mxGeometry x="20" y="70" width="440" height="320" as="geometry"/>
        </mxCell>

        <mxCell id="cpLogs" value="EKS Control Plane Logs&#xa;(api, audit, authenticator, controllerManager, scheduler)&#xa;Log Group: /aws/eks/project-bedrock-cluster/cluster" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="obs">
          <mxGeometry x="20" y="60" width="400" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="fb" value="Fluent Bit (aws-for-fluent-bit)&#xa;DaemonSet in amazon-cloudwatch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="obs">
          <mxGeometry x="20" y="190" width="400" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="appLogs" value="Container Logs → CloudWatch&#xa;Log Group: /aws/eks/project-bedrock-cluster/containers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#2c6aa0;" vertex="1" parent="obs">
          <mxGeometry x="20" y="260" width="400" height="45" as="geometry"/>
        </mxCell>

        <mxCell id="srvless" value="Event-driven Extension (S3 → Lambda)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7e6;strokeColor=#c27c0e;fontStyle=1;" vertex="1" parent="rightCol">
          <mxGeometry x="20" y="420" width="440" height="260" as="geometry"/>
        </mxCell>

        <mxCell id="assetsS3" value="S3: bedrock-assets-025-1181-newacct&#xa;Private bucket&#xa;Grading user can PutObject" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#c27c0e;" vertex="1" parent="srvless">
          <mxGeometry x="20" y="60" width="400" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="lambda" value="Lambda: bedrock-asset-processor&#xa;On upload: log “Image received: filename”" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#c27c0e;" vertex="1" parent="srvless">
          <mxGeometry x="20" y="160" width="400" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="lambdaLogs" value="Lambda → CloudWatch Logs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#c27c0e;" vertex="1" parent="srvless">
          <mxGeometry x="20" y="235" width="400" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="bonusTls" value="Bonus: DNS + TLS (Optional)&#xa;Custom domain / nip.io + ACM cert&#xa;HTTPS terminated at ALB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7ff;strokeColor=#2c6aa0;" vertex="1" parent="rightCol">
          <mxGeometry x="20" y="720" width="440" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="urlBox" value="Retail Store URL (ALB DNS)&#xa;k8s-retailap-retailui-97ec739f01-1598883444.us-east-1.elb.amazonaws.com" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="rightCol">
          <mxGeometry x="20" y="860" width="440" height="90" as="geometry"/>
        </mxCell>

        <!-- Connectors -->
        <mxCell id="e1" style="endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="userBrowser" target="alb">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e2" value="Ingress routes / → ui service" style="endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="alb" target="services">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e3" value="logs" style="endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="fb" target="appLogs">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e4" value="S3 PutObject event" style="endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="assetsS3" target="lambda">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e5" value="CI/CD uses remote state" style="endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="gha" target="tfBackend">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e6" value="kube access via aws-auth + RBAC" style="endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="iamUser" target="rbac">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e7" value="(optional) app uses RDS" style="dashed=1;endArrow=block;html=1;strokeWidth=2;" edge="1" parent="1" source="services" target="bonusData">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
